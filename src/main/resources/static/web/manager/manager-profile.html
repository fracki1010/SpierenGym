<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Gim</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css">
    <script src="https://kit.fontawesome.com/3f4db2cda2.js" crossorigin="anonymous"></script>
    <!--jQuery-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="../styles/profile.css">
</head>

<body>
<style>
    [v-cloak] {
        display: none;
    }
</style>
<div id="app">
    <nav class="fixed-top px-3 py-2 bg-dark border-bottom">
        <div class="container">
            <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
                <a href="/" class="d-flex align-items-center my-2 my-lg-0 me-lg-auto text-white text-decoration-none">
                    <span class="fs-2 fw-bold">GIM SPIEREN</span>
                </a>

                <ul class="nav col-12 col-lg-auto my-2 justify-content-center my-md-0 text-small">
                    <li>
                        <a href="manager.html" class="nav-link active text-white">
                            <svg class="bi d-block mx-auto mb-1" width="24" height="24">
                                <i class="fa-solid fa-house fa-xl" style="width: 30px;"></i>
                            </svg>
                            Home
                        </a>
                    </li>
                    <li>
                        <a href="manager-routines.html" class="nav-link text-secondary">
                            <svg class="bi d-block mx-auto mb-1" width="24" height="24">
                                <i class="fa-solid fa-dumbbell fa-xl" style="width: 30px;"></i>
                            </svg>
                            Routine
                        </a>
                    </li>
                    <li>
                        <a href="manager-exercises.html" class="nav-link text-secondary">
                            <svg class="bi d-block mx-auto mb-1" width="24" height="24">
                                <i class="fa-solid fa-stopwatch-20 fa-xl" style="width: 30px;"></i>
                            </svg>
                            Exercise
                        </a>
                    </li>
                    <li>
                        <a href="manager-rankings.html" class="nav-link text-secondary">
                            <svg class="bi d-block mx-auto mb-1" width="24" height="24">
                                <i class="fa-solid fa-ranking-star fa-xl" style="width: 30px;"></i>
                            </svg>
                            Ranking
                        </a>
                    </li>
                    <li>
                        <a @click="signOut" href="#" class="nav-link">
                            <svg class="bi d-block mx-auto mb-1" width="24" height="24">
                                <i class="fa-solid fa-right-from-bracket fa-xl" style="color: gray;"></i>
                            </svg>
                        </a>
                    </li>

                </ul>
            </div>
        </div>
    </nav>
    <!--Margen que quita el fixed-->
    <div style="margin-top: 6rem;"></div>


    <div class="row m-2 p-3">
        <div class="col-4">
            <h3 class="display-5 p-3">INFORMACIÓN</h3>
            <div class="card-body mb-3">
                <div class="row">
                    <div class="col-sm-3">
                        <p class="mb-0">Nombre</p>
                    </div>
                    <div class="col-sm-9">
                        <p class="text-muted mb-0">{{clientInfo.firstName}}</p>
                    </div>
                </div>
                <hr>
                <div class="row">
                    <div class="col-sm-3">
                        <p class="mb-0">Apellido</p>
                    </div>
                    <div class="col-sm-9">
                        <p class="text-muted mb-0">{{clientInfo.lastName}}</p>
                    </div>
                </div>
                <hr>
                <div class="row">
                    <div class="col-sm-3">
                        <p class="mb-0">Email</p>
                    </div>
                    <div class="col-sm-9">
                        <p class="text-muted mb-0">{{clientInfo.email}}</p>
                    </div>
                </div>
                <hr>
                <div class="row">
                    <div class="col-sm-3">
                        <p class="mb-0">DNI</p>
                    </div>
                    <div class="col-sm-9">
                        <p class="text-muted mb-0">{{clientInfo.dni}}</p>
                    </div>
                </div>
                <hr>
                <div class="row">
                    <div class="col-sm-3">
                        <p class="mb-0">Celular</p>
                    </div>
                    <div class="col-sm-9">
                        <p class="text-muted mb-0">{{clientInfo.phone}}</p>
                    </div>
                </div>
                <hr>
                <div class="row">
                    <div class="col-sm-3">
                        <p class="mb-0">Sexo</p>
                    </div>
                    <div class="col-sm-9">
                        <p class="text-muted mb-0">{{clientInfo.gender}}</p>
                    </div>
                </div>
                <hr>
                <div class="row">
                    <div class="col-sm-3">
                        <p class="mb-0">Edad</p>
                    </div>
                    <div class="col-sm-9">
                        <p class="text-muted mb-0">{{clientInfo.age}}</p>
                    </div>
                </div>
                <hr>
                <div class="row">
                    <div class="col-sm-3">
                        <p class="mb-0">Rutina</p>
                    </div>
                    <div class="col-sm-9">
                        <p class="text-muted mb-0">{{routine}}</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-8">
            <div class="p-4 row">
                <template v-if="hasUnapprovedPayments">
                    <template v-for="payment in payments">
                        <div style="width: 18rem;">
                            <template v-if="!payment.paymentStatus">
                            <div class="card mb-4 rounded-3 shadow-sm p-0">
                                <div class="card-header py-3">
                                    <h5 class="my-0 fw-normal">CUOTA</h5>
                                </div>
                                <div class="card-body rounded-bottom">
                                    <h3 class="card-title pricing-card-title">$ {{payment.amount}}<small
                                            class="text-body-secondary fw-light">ARG</small></h3>
                                    <ul class="list-unstyled mt-3 mb-4">
                                        <li>Vencimiento: {{payment.paymentDue}}</li>
                                        <li>Mes: {{payment.month}}</li>
                                        <li class="text-danger fw-bold">No pagado</li>
                                    </ul>
                                    <button @click="modalApproved(payment.id)" type="button" class="w-100 btn btn-lg btn-primary">Aprobar</button>
                                </div>
                            </div>
                            </template>
                        </div>
                    </template>
                </template>
                <template v-else>
                    <div class="row d-flex justify-content-center">
                        <h3 class="text-center text-success col-12">Esta al dia</h3>
                        <p class="text-center fs-5 fw-bold col-12">
                            Próximo vencimiento {{ payments.length > 0 ? payments[payments.length - 1].paymentDue : 'N/A' }}
                        </p>
                    </div>
                </template>
            </div>
        </div>
    </div>

    <!------Modal 1------>
    <div class="modal fade" id="Modal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="ModalLabel1">Aprobando pago</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                    <div class=" modal-body d-flex justify-content-center p-4 row">
                        <div class="col-12 mb-3">
                            <span>Elegir la forma de pago:</span>
                        </div>
                        <div class="input-group mb-3 col">
                            <select v-model="paymentMethod" class="form-select" id="inputGroupSelect02">
                                <option selected>Elegir...</option>
                                <option value="BNA">BNA</option>
                                <option value="MP">Mercado Pago</option>
                                <option value="EFECTIVO">Efectivo</option>
                            </select>
                            <label class="input-group-text" for="inputGroupSelect02">Options</label>
                        </div>
                    </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" @click="approved()" class="btn btn-success">Aprobar</button>
                </div>
            </div>
        </div>
    </div>

    <!------Modal 2------>
    <div class="modal fade" id="okModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Creacion de ejercicio</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body d-flex justify-content-center p-5">
                        <span class="fs-5 fw-bold me-1">Pago aprobado con exito!
                            <i class="fa-solid fa-square-check fa-bounce fa-2xl" style="color: green;"></i>
                        </span>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" data-bs-dismiss="modal" @click="refreshPage">Aceptar</button>

                </div>
            </div>
        </div>
    </div>


</div>
<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf"
        crossorigin="anonymous"></script>
<script src="../js/manager-profile.js"></script>
</body>

</html>